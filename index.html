<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>날마다 교리 - 8월 14일 제6계명이 금지하는 죄</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretendard@1.3.9/dist/web/static/pretendard.min.css">
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #f0f4f8;
        }
        .infographic-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
            overflow: hidden;
            border-left-width: 8px;
            transition: all 0.3s ease-in-out;
        }
        .infographic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .icon-bg {
            padding: 0.75rem;
            border-radius: 8px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1e40af;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
        }
        .ask-question-btn {
            background-color: #2563eb;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-weight: 600;
            transition: background-color 0.2s;
            float: right;
            margin-top: 1rem;
        }
        .ask-question-btn:hover {
            background-color: #1d4ed8;
        }
        /* Modal Styles */
        #qa-modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        #qa-modal {
            background-color: white;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            height: 80%;
            max-height: 700px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transform: scale(0.95);
            opacity: 0;
            transition: transform 0.3s ease-out, opacity 0.3s ease-out;
        }
        #qa-modal.active {
            transform: scale(1);
            opacity: 1;
        }
        .modal-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        #modal-title-text {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1e3a8a;
            margin: 0;
        }
        .close-modal-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            color: #6b7280;
        }
        #chat-window {
            flex-grow: 1;
            padding: 1.5rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .chat-bubble {
            padding: 0.75rem 1rem;
            border-radius: 12px;
            max-width: 80%;
            word-wrap: break-word;
        }
        .user-bubble {
            background-color: #dbeafe;
            color: #1e3a8a;
            align-self: flex-end;
            border-bottom-right-radius: 0;
        }
        .ai-bubble {
            background-color: #f3f4f6;
            color: #374151;
            align-self: flex-start;
            border-bottom-left-radius: 0;
        }
        .ai-bubble.thinking::after {
            content: '...';
            display: inline-block;
            animation: thinking 1.5s infinite;
        }
        @keyframes thinking {
            0%, 20% { content: '.'; }
            40%, 60% { content: '..'; }
            80%, 100% { content: '...'; }
        }
        .chat-input-area {
            border-top: 1px solid #e5e7eb;
            padding: 1rem;
            display: flex;
        }
        #user-question-input {
            flex-grow: 1;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            padding: 0.5rem 0.75rem;
            margin-right: 0.5rem;
        }
        #send-question-btn {
            background-color: #2563eb;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 0.5rem 1rem;
            font-weight: 600;
            cursor: pointer;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <main class="max-w-4xl mx-auto">
        <header class="text-center mb-12">
            <p class="text-blue-600 font-semibold">8월 14일</p>
            <h1 class="text-4xl md:text-5xl font-extrabold text-slate-800 mb-2">제6계명이 금지하는 죄</h1>
            <p class="text-lg md:text-xl text-gray-600 max-w-2xl mx-auto mt-2">생명의 존엄성을 훼손하는 모든 직접적, 간접적 행위와 내면의 죄악에 대한 포괄적인 해설</p>
        </header>

        <section id="chapter-1" class="infographic-card" style="border-color: #ef4444;">
            <div class="p-6 md:p-8">
                <h2 class="flex items-center">
                    <span class="icon-bg" style="background-color: #fee2e2;">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" />
                        </svg>
                    </span>
                    <span class="ml-4 text-2xl font-bold text-slate-700">금지된 죄악의 범위</span>
                </h2>
                <div class="space-y-4 text-gray-700">
                    <p>제6계명은 단순히 물리적인 살인 행위만을 금지하는 것이 아닙니다. 대요리문답 136항은 생명을 훼손하는 모든 형태의 죄를 포괄적으로 금지하고 있음을 명확히 합니다. 이는 소극적인 방치부터 내면의 악한 감정, 그리고 실제적인 폭력 행위에 이르기까지 광범위합니다.</p>
                    <div class="bg-red-50 p-4 rounded-lg grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <h3 class="mt-0 text-red-800">소극적 죄악 (Sins of Omission)</h3>
                            <ul class="list-disc list-inside space-y-1 mt-2 text-red-700">
                                <li>생명 보존을 위한 합법적 수단을 게을리하거나 거두어들이는 행위</li>
                                <li>타인의 곤궁함을 보고도 돕지 않는 것</li>
                            </ul>
                        </div>
                        <div>
                            <h3 class="mt-0 text-red-800">적극적 죄악 (Sins of Commission)</h3>
                             <ul class="list-disc list-inside space-y-1 mt-2 text-red-700">
                                <li>자살을 포함하여 부당하게 생명을 빼앗는 모든 행위</li>
                                <li>죄악된 분노, 증오, 시기, 복수심</li>
                                <li>폭력적인 말과 행동, 압제</li>
                             </ul>
                        </div>
                    </div>
                </div>
                <button class="ask-question-btn">이 장에 대해 질문하기</button>
            </div>
        </section>

        <section id="chapter-2" class="infographic-card" style="border-color: #f97316;">
            <div class="p-6 md:p-8">
                <h2 class="flex items-center">
                    <span class="icon-bg" style="background-color: #ffedd5;">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                           <path stroke-linecap="round" stroke-linejoin="round" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </span>
                    <span class="ml-4 text-2xl font-bold text-slate-700">내면의 죄: 분노와 증오</span>
                </h2>
                <div class="space-y-4 text-gray-700">
                    <p>예수님께서는 산상수훈에서 살인죄의 뿌리가 마음에 있음을 가르치셨습니다. 제6계명은 외부로 드러나는 행동뿐만 아니라, 생명을 경시하는 모든 내면의 태도와 감정을 금합니다.</p>
                    <blockquote class="p-4 my-4 border-l-4 border-gray-300 bg-gray-50">
                        <p class="italic text-gray-800">"그 형제를 미워하는 자마다 살인하는 자니..." (요한일서 3:15)</p>
                    </blockquote>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-orange-50 p-4 rounded-lg">
                            <strong class="text-orange-800">죄악된 분노 (Sinful Anger)</strong>
                            <p class="text-sm mt-1">정의롭지 못한 이유로, 혹은 정당한 이유일지라도 과도하게 품는 분노.</p>
                        </div>
                        <div class="bg-orange-50 p-4 rounded-lg">
                             <strong class="text-orange-800">증오와 시기 (Hatred & Envy)</strong>
                            <p class="text-sm mt-1">타인의 불행을 바라거나 잘됨을 질투하는 마음.</p>
                        </div>
                        <div class="bg-orange-50 p-4 rounded-lg">
                             <strong class="text-orange-800">복수심 (Desire for Revenge)</strong>
                            <p class="text-sm mt-1">받은 해에 대해 앙갚음하려는 마음.</p>
                        </div>
                         <div class="bg-orange-50 p-4 rounded-lg">
                             <strong class="text-orange-800">무분별한 격정 (Rash Passions)</strong>
                            <p class="text-sm mt-1">순간적인 감정을 제어하지 못해 폭력으로 이어지는 모든 격정.</p>
                        </div>
                    </div>
                    <p>이러한 내면의 죄들은 그 자체로 하나님의 법을 어기는 것이며, 실제적인 폭력과 살인으로 발전할 수 있는 위험한 씨앗이 됩니다.</p>
                </div>
                <button class="ask-question-btn">이 장에 대해 질문하기</button>
            </div>
        </section>

        <section id="chapter-3" class="infographic-card" style="border-color: #8b5cf6;">
            <div class="p-6 md:p-8">
                <h2 class="flex items-center">
                    <span class="icon-bg" style="background-color: #ede9fe;">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-violet-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                           <path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                        </svg>
                    </span>
                    <span class="ml-4 text-2xl font-bold text-slate-700">말과 행동의 죄</span>
                </h2>
                <div class="space-y-4 text-gray-700">
                    <p>마음속의 악한 감정은 종종 말과 행동으로 표출되어 타인의 영혼과 육체에 상처를 입힙니다. 이러한 행위 역시 제6계명이 금하는 죄에 해당합니다.</p>
                     <h3 class="mt-4">언어 폭력</h3>
                    <ul class="list-disc list-inside space-y-2 pl-2">
                        <li><strong>괴롭히는 말 (Vexing Words):</strong> 상대방을 고의로 괴롭히고 힘들게 하는 말.</li>
                        <li><strong>조롱과 비웃음 (Scoffing & Scoffing):</strong> 타인을 멸시하고 비웃는 행위.</li>
                        <li><strong>경솔한 비난 (Rash Censure):</strong> 충분한 근거 없이 성급하게 남을 판단하고 비난하는 것.</li>
                        <li><strong>압제적인 말 (Oppressive Words):</strong> 권위나 힘을 이용하여 상대방을 억누르는 말.</li>
                    </ul>
                    <h3 class="mt-4">신체적 폭력</h3>
                    <ul class="list-disc list-inside space-y-2 pl-2">
                        <li><strong>다툼과 구타 (Quarrels & Blows):</strong> 물리적인 싸움과 폭행.</li>
                        <li><strong>상해와 불구 만들기 (Maiming & Wounding):</strong> 신체에 상처를 입히거나 불구로 만드는 행위.</li>
                        <li><strong>생명을 위협하는 모든 행위:</strong> 타인의 생명에 위협을 가하는 모든 행동.</li>
                    </ul>
                </div>
                <button class="ask-question-btn">이 장에 대해 질문하기</button>
            </div>
        </section>

        <section id="chapter-4" class="infographic-card" style="border-color: #10b981;">
            <div class="p-6 md:p-8">
                 <h2 class="flex items-center">
                    <span class="icon-bg" style="background-color: #d1fae5;">
                       <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-emerald-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M12 18h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                        </svg>
                    </span>
                    <span class="ml-4 text-2xl font-bold text-slate-700">자기 파괴적인 행위</span>
                </h2>
                <div class="space-y-4 text-gray-700">
                    <p>제6계명은 타인의 생명뿐만 아니라 자기 자신의 생명을 보존할 의무도 포함하므로, 자신의 몸과 마음을 해치는 행위 또한 금지합니다.</p>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-emerald-50 p-4 rounded-lg">
                            <strong class="text-emerald-800">자살 (Self-murder)</strong>
                            <p class="text-sm mt-1">스스로의 생명을 끊는 행위는 생명의 주인이신 하나님의 주권에 대한 명백한 도전입니다.</p>
                        </div>
                        <div class="bg-emerald-50 p-4 rounded-lg">
                             <strong class="text-emerald-800">무절제한 생활 (Intemperance)</strong>
                            <p class="text-sm mt-1">음식, 음료, 약물 등의 무분별한 사용으로 건강을 해치는 것.</p>
                        </div>
                        <div class="bg-emerald-50 p-4 rounded-lg">
                             <strong class="text-emerald-800">과도한 노동과 오락 (Excessive Labor/Recreation)</strong>
                            <p class="text-sm mt-1">몸을 돌보지 않는 지나친 노동이나, 건강을 해치는 무분별한 오락.</p>
                        </div>
                         <div class="bg-emerald-50 p-4 rounded-lg">
                             <strong class="text-emerald-800">불필요한 위험 노출 (Needless Risk)</strong>
                            <p class="text-sm mt-1">자신의 생명을 불필요한 위험에 고의로 노출시키는 행위.</p>
                        </div>
                    </div>
                </div>
                <button class="ask-question-btn">이 장에 대해 질문하기</button>
            </div>
        </section>

        <section id="chapter-5" class="infographic-card" style="border-color: #f59e0b;">
            <div class="p-6 md:p-8">
                <h2 class="flex items-center">
                    <span class="icon-bg" style="background-color: #fef3c7;">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-amber-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    </span>
                    <span class="ml-4 text-2xl font-bold text-slate-700">적용 질문</span>
                </h2>
                <div class="space-y-4 text-gray-700">
                    <ol class="list-decimal list-inside space-y-3">
                        <li>제6계명이 금지하는 죄는 실제 살인 행위 외에 어떤 것들이 있습니까? 오늘 학습한 내용에 근거하여 세 가지 이상을 들어 설명해 보십시오.</li>
                        <li>예수님께서 "형제를 미워하는 자마다 살인하는 자"라고 말씀하신 이유는 무엇일까요? 마음의 죄가 실제 행동과 어떻게 연결되는지 생각해 봅시다.</li>
                        <li>우리의 일상적인 말(농담, 비판, 뒷담화 등)이 어떻게 제6계명을 어기는 '살인'이 될 수 있을지 구체적인 예를 들어 이야기해 봅시다.</li>
                        <li>자신의 건강을 돌보지 않는 것(과로, 과식, 수면 부족 등)이 왜 제6계명을 어기는 죄가 될 수 있는지 설명해 보십시오.</li>
                    </ol>
                </div>
                <button class="ask-question-btn">이 장에 대해 질문하기</button>
            </div>
        </section>

        <footer class="text-center mt-12 text-sm text-gray-500">
            <p>교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다.</p>
        </footer>

    </main>

    <div id="qa-modal-backdrop">
        <div id="qa-modal">
            <div class="modal-header">
                <h2 id="modal-title-text">질문하기</h2>
                <button class="close-modal-btn">&times;</button>
            </div>
            <div id="chat-window">
                </div>
            <div class="chat-input-area">
                <input type="text" id="user-question-input" placeholder="여기에 질문을 입력하세요...">
                <button id="send-question-btn">전송</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const modalBackdrop = document.getElementById('qa-modal-backdrop');
            const modal = document.getElementById('qa-modal');
            const closeModalBtn = modal.querySelector('.close-modal-btn');
            const askButtons = document.querySelectorAll('.ask-question-btn');
            const modalTitle = document.getElementById('modal-title-text');
            const chatWindow = document.getElementById('chat-window');
            const userInput = document.getElementById('user-question-input');
            const sendBtn = document.getElementById('send-question-btn');
            
            let currentChapterContext = '';
            let currentChapterTitle = '';

            const openModal = (chapterElement) => {
                currentChapterTitle = chapterElement.querySelector('h2 > span:last-child').textContent.trim();
                currentChapterContext = chapterElement.querySelector('.p-6, .p-8').innerText;
                
                modalTitle.textContent = `"${currentChapterTitle}"에 대해 질문하기`;
                chatWindow.innerHTML = '<div class="ai-bubble">안녕하세요! 이 장의 내용에 대해 무엇이든 질문해주세요.</div>';
                
                modalBackdrop.style.display = 'flex';
                document.body.style.overflow = 'hidden';
                setTimeout(() => modal.classList.add('active'), 10);
            };

            const closeModal = () => {
                modal.classList.remove('active');
                setTimeout(() => {
                    modalBackdrop.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }, 300);
            };

            askButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const chapterSection = e.target.closest('section');
                    openModal(chapterSection);
                });
            });

            closeModalBtn.addEventListener('click', closeModal);
            modalBackdrop.addEventListener('click', (e) => {
                if (e.target === modalBackdrop) {
                    closeModal();
                }
            });

            const handleQuestionSubmit = async () => {
                const userQuestion = userInput.value.trim();
                if (userQuestion === '') return;

                appendMessage(userQuestion, 'user');
                userInput.value = '';

                const thinkingBubble = appendMessage('', 'ai', true);

                const finalPrompt = `
                    당신은 [콘텐츠 주제]에 대해 설명하는 전문 AI 어시스턴트입니다. 아래에 명시된 두 가지 규칙의 우선순위를 반드시 지켜서 사용자의 질문에 답변해 주세요.

                    [규칙 1: 주어진 자료 우선의 원칙]
                    - 최우선적으로, 아래에 제공되는 "[강의 노트 내용]"에 근거하여 답변을 생성해야 합니다.
                    - 자료에 명시된 사실과 논리를 바탕으로 질문에 직접적으로 그리고 자연스럽게 답해주세요.

                    [규칙 2: 지식 확장 및 보충의 원칙]
                    - 만약 "[강의 노트 내용]"만으로 답변하기에 정보가 불충분하거나 관련 내용이 없을 경우에는, 당신의 전통적 개혁신학의 전문 지식을 활용하여 답변을 보충할 수 있습니다.(반드시 전통 개혁신학에 근거해야 합니다.)
                    - 이 경우, 보충된 내용이 원래 자료에 없었음을 명확히 하기 위해 "보충 설명을 드리자면..." 과 같이 서술을 시작해주세요.

                    ---
                    [강의 노트 제목]: ${currentChapterTitle}
                    ---
                    [강의 노트 내용]:
                    ${currentChapterContext}
                    ---
                    [사용자 질문]:
                    ${userQuestion}
                `;

                try {
                    const response = await fetch('/api/ask-gemini', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ prompt: finalPrompt })
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();
                    
                    let aiResponseText = '죄송합니다. 답변을 생성하는 데 문제가 발생했습니다.';
                    if (data && data.candidates && data.candidates.length > 0 &&
                        data.candidates[0].content && data.candidates[0].content.parts && data.candidates[0].content.parts.length > 0 &&
                        data.candidates[0].content.parts[0].text) {
                        aiResponseText = data.candidates[0].content.parts[0].text;
                    }
                    
                    thinkingBubble.classList.remove('thinking');
                    thinkingBubble.innerHTML = aiResponseText.replace(/\n/g, '<br>');

                } catch (error) {
                    console.error('API Error:', error);
                    thinkingBubble.classList.remove('thinking');
                    thinkingBubble.textContent = '오류가 발생했습니다. 잠시 후 다시 시도해주세요.';
                }
            };

            sendBtn.addEventListener('click', handleQuestionSubmit);
            userInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.isComposing) {
                    e.preventDefault();
                    handleQuestionSubmit();
                }
            });

            function appendMessage(text, sender, isThinking = false) {
                const bubble = document.createElement('div');
                bubble.classList.add('chat-bubble', sender === 'user' ? 'user-bubble' : 'ai-bubble');
                
                if (isThinking) {
                    bubble.classList.add('thinking');
                    bubble.textContent = '생각 중...';
                } else {
                    bubble.innerHTML = text.replace(/\n/g, '<br>');
                }

                chatWindow.appendChild(bubble);
                chatWindow.scrollTop = chatWindow.scrollHeight;
                return bubble;
            }
        });
    </script>
</body>
</html>